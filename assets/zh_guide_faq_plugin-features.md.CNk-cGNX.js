import{_ as i,o as e,c as l,ak as t}from"./chunks/framework.D3UbUFr7.js";const b=JSON.parse('{"title":"插件功能问题","description":"","frontmatter":{},"headers":[],"relativePath":"zh/guide/faq/plugin-features.md","filePath":"zh/guide/faq/plugin-features.md"}'),r={name:"zh/guide/faq/plugin-features.md"};function s(h,a,n,o,d,p){return e(),l("div",null,[...a[0]||(a[0]=[t(`<h1 id="插件功能问题" tabindex="-1">插件功能问题 <a class="header-anchor" href="#插件功能问题" aria-label="Permalink to “插件功能问题”">​</a></h1><p>关于翻译选项、OCR、功能说明等问题。</p><hr><h2 id="scanned-pdf-detected-翻译失败-🔥" tabindex="-1">Scanned PDF detected, 翻译失败 🔥 <a class="header-anchor" href="#scanned-pdf-detected-翻译失败-🔥" aria-label="Permalink to “Scanned PDF detected, 翻译失败 🔥”">​</a></h2><h3 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to “问题描述”">​</a></h3><p>翻译时提示 &quot;Scanned PDF detected, 翻译失败&quot;。</p><h3 id="原因" tabindex="-1">原因 <a class="header-anchor" href="#原因" aria-label="Permalink to “原因”">​</a></h3><p>pdf2zh 和 pdf2zh_next <strong>不直接提供文档 OCR 功能</strong>。您需要用其他工具对扫描版文件进行 OCR 处理，再调用插件的翻译功能。</p><h3 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-label="Permalink to “解决方案”">​</a></h3><h3 id="方案-1-对-pdf-进行-ocr-处理" tabindex="-1">方案 1：对 PDF 进行 OCR 处理 <a class="header-anchor" href="#方案-1-对-pdf-进行-ocr-处理" aria-label="Permalink to “方案 1：对 PDF 进行 OCR 处理”">​</a></h3><p>使用其他工具对扫描版 PDF 进行 OCR：</p><ol><li><p><strong>Adobe Acrobat</strong></p><ul><li>打开 PDF → 编辑 PDF → 识别文本</li></ul></li><li><p><strong>ABBYY FineReader</strong></p><ul><li>专业的 OCR 软件</li></ul></li><li><p><strong>在线 OCR 服务</strong></p><ul><li>各种在线 PDF 转 Word 再转 PDF 的服务</li></ul></li><li><p><strong>命令行工具</strong></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用 ocrmypdf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ocrmypdf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input.pdf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> output.pdf</span></span></code></pre></div></li></ol><h3 id="方案-2-开启-ocr-临时方案" tabindex="-1">方案 2：开启 OCR 临时方案 <a class="header-anchor" href="#方案-2-开启-ocr-临时方案" aria-label="Permalink to “方案 2：开启 OCR 临时方案”">​</a></h3><p>在 Zotero 插件配置中：</p><ol><li>确保 &quot;自动开启 OCR 临时方案&quot; 选项已开启</li><li>如果还是失败，尝试开启 &quot;兼容模式&quot;</li></ol><div class="tip custom-block"><p class="custom-block-title">注意</p><p>OCR 选项并不是直接提供 OCR 服务，它只是一个对于 OCR 后的文件进行兼容的临时方案。</p></div><h3 id="方案-3-手动处理" tabindex="-1">方案 3：手动处理 <a class="header-anchor" href="#方案-3-手动处理" aria-label="Permalink to “方案 3：手动处理”">​</a></h3><p>将扫描版 PDF 转换为可搜索的 PDF 后，再使用插件翻译。</p><hr><h2 id="ocr-模式与兼容模式是什么" tabindex="-1">OCR 模式与兼容模式是什么？ <a class="header-anchor" href="#ocr-模式与兼容模式是什么" aria-label="Permalink to “OCR 模式与兼容模式是什么？”">​</a></h2><h3 id="问题描述-1" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述-1" aria-label="Permalink to “问题描述”">​</a></h3><p>pdf2zh_next 服务中的 OCR 模式与兼容模式是指什么？应该怎么选择？</p><h3 id="原因-1" tabindex="-1">原因 <a class="header-anchor" href="#原因-1" aria-label="Permalink to “原因”">​</a></h3><p>这两个选项是为了处理不同类型的 PDF 文件而设计的。</p><h3 id="解决方案-1" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-1" aria-label="Permalink to “解决方案”">​</a></h3><h3 id="ocr-模式" tabindex="-1">OCR 模式 <a class="header-anchor" href="#ocr-模式" aria-label="Permalink to “OCR 模式”">​</a></h3><ul><li><strong>作用</strong>：不直接提供 OCR 服务，而是对 OCR 后的文件进行兼容</li><li><strong>使用场景</strong>：当您的 PDF 已经做过 OCR 处理时</li><li><strong>建议</strong>：保持&quot;自动开启 OCR 临时方案&quot;选项开启</li></ul><h3 id="兼容模式" tabindex="-1">兼容模式 <a class="header-anchor" href="#兼容模式" aria-label="Permalink to “兼容模式”">​</a></h3><ul><li><strong>作用</strong>：生成的文件兼容性更好，但文件大小会更大</li><li><strong>使用场景</strong>：非必要情况不需要开启</li><li><strong>建议</strong>：如果您翻译功能正常，但某一次失败了（并且确定不是远程翻译服务的问题），可以尝试开启</li></ul><div class="tip custom-block"><p class="custom-block-title">选择建议</p><ul><li>正常情况：OCR 方案开启，兼容模式关闭</li><li>翻译失败（非服务问题）：尝试开启兼容模式</li></ul></div><hr><h2 id="裁剪-pdf-时内容被截断" tabindex="-1">裁剪 PDF 时内容被截断 <a class="header-anchor" href="#裁剪-pdf-时内容被截断" aria-label="Permalink to “裁剪 PDF 时内容被截断”">​</a></h2><h3 id="问题描述-2" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述-2" aria-label="Permalink to “问题描述”">​</a></h3><p>使用&quot;裁剪 PDF&quot;功能时，部分内容被截断了。</p><h3 id="原因-2" tabindex="-1">原因 <a class="header-anchor" href="#原因-2" aria-label="Permalink to “原因”">​</a></h3><p>默认的裁剪偏移量可能不适合某些 PDF。</p><h3 id="解决方案-2" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-2" aria-label="Permalink to “解决方案”">​</a></h3><p>调整 <code>server/utils/config.py</code> 中的 <code>config.pdf_w_offset</code> 值：</p><ol><li>打开文件：<code>server/utils/config.py</code></li><li>找到 <code>pdf_w_offset</code> 配置项</li><li><strong>降低</strong>该值（例如从 50 降到 30）</li><li>保存文件并重启 server.py</li></ol><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># config.py 示例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.pdf_w_offset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 默认值可能更高，降低这个值</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">注意</p><ul><li>值越小，裁剪越保守（可能保留更多空白）</li><li>值越大，裁剪越激进（可能截断内容）</li><li>建议逐步调整，找到合适的值</li></ul></div><hr><h2 id="双栏-pdf-翻译效果不好" tabindex="-1">双栏 PDF 翻译效果不好 <a class="header-anchor" href="#双栏-pdf-翻译效果不好" aria-label="Permalink to “双栏 PDF 翻译效果不好”">​</a></h2><h3 id="问题描述-3" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述-3" aria-label="Permalink to “问题描述”">​</a></h3><p>双栏论文翻译后效果不好，或者格式混乱。</p><h3 id="原因-3" tabindex="-1">原因 <a class="header-anchor" href="#原因-3" aria-label="Permalink to “原因”">​</a></h3><p>普通翻译模式不适合双栏 PDF。</p><h3 id="解决方案-3" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-3" aria-label="Permalink to “解决方案”">​</a></h3><p>使用 <strong>双语对照(裁剪)</strong> 选项：</p><ol><li>右键点击双栏 PDF</li><li>选择「PDF2zh → 双语对照(裁剪)」</li><li>此选项会： <ul><li>先将 PDF 竖向裁剪为单栏文件</li><li>再左右拼接原文和翻译</li></ul></li></ol><div class="tip custom-block"><p class="custom-block-title">说明</p><p>&quot;双语对照(裁剪)&quot;功能仅针对<strong>双栏 PDF 论文</strong>设计。</p></div><hr><h2 id="各种翻译选项有什么区别" tabindex="-1">各种翻译选项有什么区别？ <a class="header-anchor" href="#各种翻译选项有什么区别" aria-label="Permalink to “各种翻译选项有什么区别？”">​</a></h2><h3 id="问题描述-4" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述-4" aria-label="Permalink to “问题描述”">​</a></h3><p>不知道该选择&quot;翻译 PDF&quot;、&quot;裁剪 PDF&quot;、&quot;双语对照&quot;还是&quot;双语对照(裁剪)&quot;。</p><h3 id="原因-4" tabindex="-1">原因 <a class="header-anchor" href="#原因-4" aria-label="Permalink to “原因”">​</a></h3><p>不同选项适用于不同的使用场景。</p><h3 id="解决方案-4" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-4" aria-label="Permalink to “解决方案”">​</a></h3><h3 id="翻译-pdf-translate-pdf" tabindex="-1">翻译 PDF (Translate PDF) <a class="header-anchor" href="#翻译-pdf-translate-pdf" aria-label="Permalink to “翻译 PDF (Translate PDF)”">​</a></h3><ul><li><strong>适用场景</strong>：大多数情况</li><li><strong>效果</strong>：生成纯翻译后的 PDF</li><li><strong>文件类型</strong>：替换原文或生成新文件（取决于设置）</li></ul><h3 id="裁剪-pdf-crop-pdf" tabindex="-1">裁剪 PDF (Crop PDF) <a class="header-anchor" href="#裁剪-pdf-crop-pdf" aria-label="Permalink to “裁剪 PDF (Crop PDF)”">​</a></h3><ul><li><strong>适用场景</strong>：手机阅读、需要裁剪边距</li><li><strong>效果</strong>：在宽度 1/2 处裁剪，上下拼接</li><li><strong>注意</strong>：会将页面两侧空白处裁剪，可能截断内容</li></ul><h3 id="双语对照-compare-pdf" tabindex="-1">双语对照 (Compare PDF) <a class="header-anchor" href="#双语对照-compare-pdf" aria-label="Permalink to “双语对照 (Compare PDF)”">​</a></h3><ul><li><strong>适用场景</strong>：需要对照原文和翻译</li><li><strong>效果</strong>：左边原文，右边翻译</li><li><strong>等同于</strong>：pdf2zh_next 引擎 + 双语模式 Left&amp;Right</li></ul><h3 id="双语对照-裁剪-crop-compare-pdf" tabindex="-1">双语对照(裁剪) (Crop-Compare PDF) <a class="header-anchor" href="#双语对照-裁剪-crop-compare-pdf" aria-label="Permalink to “双语对照(裁剪) (Crop-Compare PDF)”">​</a></h3><ul><li><strong>适用场景</strong>：双栏论文需要对照</li><li><strong>效果</strong>：先竖向裁剪为单栏，再左右拼接</li><li><strong>最适合</strong>：双栏学术论文</li></ul><h3 id="选择建议" tabindex="-1">选择建议 <a class="header-anchor" href="#选择建议" aria-label="Permalink to “选择建议”">​</a></h3><table tabindex="0"><thead><tr><th>需求</th><th>推荐选项</th></tr></thead><tbody><tr><td>纯阅读翻译</td><td>翻译 PDF</td></tr><tr><td>手机阅读</td><td>裁剪 PDF</td></tr><tr><td>学习/对照</td><td>双语对照</td></tr><tr><td>双栏论文对照</td><td>双语对照(裁剪)</td></tr></tbody></table><hr><h2 id="批量翻译失败" tabindex="-1">批量翻译失败 <a class="header-anchor" href="#批量翻译失败" aria-label="Permalink to “批量翻译失败”">​</a></h2><h3 id="问题描述-5" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述-5" aria-label="Permalink to “问题描述”">​</a></h3><p>多选条目进行批量翻译时，部分或全部失败。</p><h3 id="原因-5" tabindex="-1">原因 <a class="header-anchor" href="#原因-5" aria-label="Permalink to “原因”">​</a></h3><ol><li>并发数设置过高</li><li>网络问题</li><li>某些 PDF 有问题</li></ol><h3 id="解决方案-5" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-5" aria-label="Permalink to “解决方案”">​</a></h3><ol><li><p><strong>降低并发数</strong></p><ul><li>在插件设置中降低 QPS 和 Pool Size</li><li>或者分批次翻译</li></ul></li><li><p><strong>检查失败的 PDF</strong></p><ul><li>单独翻译失败的 PDF 查看具体错误</li><li>可能是扫描版或格式问题</li></ul></li><li><p><strong>查看终端日志</strong></p><ul><li>查看具体哪个文件失败及失败原因</li></ul></li></ol><hr><h2 id="自定义字体不生效" tabindex="-1">自定义字体不生效 <a class="header-anchor" href="#自定义字体不生效" aria-label="Permalink to “自定义字体不生效”">​</a></h2><h3 id="问题描述-6" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述-6" aria-label="Permalink to “问题描述”">​</a></h3><p>在 pdf2zh 引擎中配置了自定义字体，但没有生效。</p><h3 id="原因-6" tabindex="-1">原因 <a class="header-anchor" href="#原因-6" aria-label="Permalink to “原因”">​</a></h3><ol><li>远程服务器部署时，插件无法访问本地字体文件</li><li>字体路径配置错误</li></ol><h3 id="解决方案-6" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-6" aria-label="Permalink to “解决方案”">​</a></h3><h3 id="本地部署" tabindex="-1">本地部署 <a class="header-anchor" href="#本地部署" aria-label="Permalink to “本地部署”">​</a></h3><ol><li>确保字体文件路径正确</li><li>路径必须是本地绝对路径</li><li>确保字体文件存在且可读</li></ol><h3 id="远程部署" tabindex="-1">远程部署 <a class="header-anchor" href="#远程部署" aria-label="Permalink to “远程部署”">​</a></h3><p>如果采用远端服务器部署，暂时无法使用插件界面的自定义字体配置，需要手动修改配置文件：</p><ol><li>打开服务器上的 <code>config.json</code> 文件</li><li>找到 <code>NOTO_FONT_PATH</code> 字段</li><li>修改为服务器上的字体路径</li><li>重启 server.py</li></ol><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;NOTO_FONT_PATH&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/path/to/your/font.ttf&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="额外配置参数怎么用" tabindex="-1">额外配置参数怎么用？ <a class="header-anchor" href="#额外配置参数怎么用" aria-label="Permalink to “额外配置参数怎么用？”">​</a></h2><h3 id="问题描述-7" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述-7" aria-label="Permalink to “问题描述”">​</a></h3><p>不知道&quot;额外配置参数&quot;该怎么填写。</p><h3 id="原因-7" tabindex="-1">原因 <a class="header-anchor" href="#原因-7" aria-label="Permalink to “原因”">​</a></h3><p>额外配置参数用于设置不同服务的特定参数。</p><h3 id="解决方案-7" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-7" aria-label="Permalink to “解决方案”">​</a></h3><h3 id="基本规则" tabindex="-1">基本规则 <a class="header-anchor" href="#基本规则" aria-label="Permalink to “基本规则”">​</a></h3><p>额外配置参数名需要与配置文件中的字段相同。</p><h3 id="示例-pdf2zh-next-的-openai-参数" tabindex="-1">示例：pdf2zh_next 的 openai 参数 <a class="header-anchor" href="#示例-pdf2zh-next-的-openai-参数" aria-label="Permalink to “示例：pdf2zh_next 的 openai 参数”">​</a></h3><p>在额外配置中填写：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>openai_temperature=0.3</span></span>
<span class="line"><span>openai_send_temperature=true</span></span></code></pre></div><p>这些参数与 <code>config.toml</code> 文件中的字段相对应。</p><div class="info custom-block"><p class="custom-block-title">详细文档</p><p>更多关于额外配置的信息，请参考 <a href="https://github.com/guaguastandup/zotero-pdf2zh/blob/main/server/doc/extraData.md" target="_blank" rel="noreferrer">extraData.md</a></p></div><h3 id="常见参数示例" tabindex="-1">常见参数示例 <a class="header-anchor" href="#常见参数示例" aria-label="Permalink to “常见参数示例”">​</a></h3><table tabindex="0"><thead><tr><th>服务</th><th>参数名</th><th>说明</th></tr></thead><tbody><tr><td>openai</td><td>temperature</td><td>控制随机性，0-1 之间</td></tr><tr><td>openai</td><td>top_p</td><td>核采样参数</td></tr><tr><td>deepseek</td><td>temperature</td><td>控制随机性</td></tr></tbody></table><hr><h2 id="生成的-pdf-在某些阅读器显示异常" tabindex="-1">生成的 PDF 在某些阅读器显示异常 <a class="header-anchor" href="#生成的-pdf-在某些阅读器显示异常" aria-label="Permalink to “生成的 PDF 在某些阅读器显示异常”">​</a></h2><h3 id="问题描述-8" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述-8" aria-label="Permalink to “问题描述”">​</a></h3><p>翻译后的 PDF 在某些阅读器中显示格式异常。</p><h3 id="原因-8" tabindex="-1">原因 <a class="header-anchor" href="#原因-8" aria-label="Permalink to “原因”">​</a></h3><p>不同 PDF 阅读器对 PDF 规范的支持程度不同。</p><h3 id="解决方案-8" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-8" aria-label="Permalink to “解决方案”">​</a></h3><ol><li><p><strong>更换阅读器</strong></p><ul><li>尝试使用 Adobe Acrobat Reader</li><li>或其他主流 PDF 阅读器</li></ul></li><li><p><strong>更换引擎</strong></p><ul><li>尝试切换 pdf2zh 和 pdf2zh_next 引擎</li></ul></li><li><p><strong>更换生成模式</strong></p><ul><li>尝试不同的翻译选项（如从&quot;翻译 PDF&quot;改为&quot;双语对照&quot;）</li></ul></li></ol>`,113)])])}const k=i(r,[["render",s]]);export{b as __pageData,k as default};
