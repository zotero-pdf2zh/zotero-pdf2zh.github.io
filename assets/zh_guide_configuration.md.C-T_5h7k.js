import{_ as a,o as e,c as i,ak as d}from"./chunks/framework.D3UbUFr7.js";const b=JSON.parse('{"title":"配置说明","description":"","frontmatter":{},"headers":[],"relativePath":"zh/guide/configuration.md","filePath":"zh/guide/configuration.md"}'),s={name:"zh/guide/configuration.md"};function r(l,t,o,n,h,p){return e(),i("div",null,[...t[0]||(t[0]=[d(`<h1 id="配置说明" tabindex="-1">配置说明 <a class="header-anchor" href="#配置说明" aria-label="Permalink to “配置说明”">​</a></h1><p>本文档详细介绍 Zotero PDF2zh 插件的配置选项。</p><h2 id="插件设置" tabindex="-1">插件设置 <a class="header-anchor" href="#插件设置" aria-label="Permalink to “插件设置”">​</a></h2><p>在 Zotero 中打开「工具 → PDF2zh 首选项」进行配置。</p><p><img src="https://raw.githubusercontent.com/guaguastandup/zotero-pdf2zh/main/images/preference.png" alt="Zotero PDF2zh 首选项"></p><h2 id="基础配置" tabindex="-1">基础配置 <a class="header-anchor" href="#基础配置" aria-label="Permalink to “基础配置”">​</a></h2><h3 id="python-server-ip" tabindex="-1">Python Server IP <a class="header-anchor" href="#python-server-ip" aria-label="Permalink to “Python Server IP”">​</a></h3><p>设置 Python 服务的地址。</p><ul><li><strong>默认值</strong>：<code>http://127.0.0.1:8890</code></li><li><strong>说明</strong>：如果您修改了服务端口或使用远程部署，需要修改此地址</li></ul><h3 id="翻译引擎" tabindex="-1">翻译引擎 <a class="header-anchor" href="#翻译引擎" aria-label="Permalink to “翻译引擎”">​</a></h3><p>选择使用的翻译引擎。</p><ul><li><strong>pdf2zh</strong>：基于 PDFMathTranslate 的翻译引擎</li><li><strong>pdf2zh_next</strong>：新一代翻译引擎，支持更多功能</li></ul><p>切换引擎后，界面将显示对应引擎的配置选项。</p><h2 id="qps-和-pool-size-配置" tabindex="-1">QPS 和 Pool Size 配置 <a class="header-anchor" href="#qps-和-pool-size-配置" aria-label="Permalink to “QPS 和 Pool Size 配置”">​</a></h2><p>请参考您的翻译服务提供商的限制设置。</p><h3 id="计算公式" tabindex="-1">计算公式 <a class="header-anchor" href="#计算公式" aria-label="Permalink to “计算公式”">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>qps = rpm / 60</span></span></code></pre></div><h3 id="pool-size-设置规则" tabindex="-1">Pool Size 设置规则 <a class="header-anchor" href="#pool-size-设置规则" aria-label="Permalink to “Pool Size 设置规则”">​</a></h3><table tabindex="0"><thead><tr><th>限制类型</th><th>计算公式</th></tr></thead><tbody><tr><td>qps/rpm 限速</td><td><code>pool size = qps * 10</code></td></tr><tr><td>并发数限制</td><td><code>pool size = max(向下取整(0.9*官方并发数限制), 官方并发数限制-20)</code>，<code>qps = pool size</code></td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">不确定如何设置？</p><p>如果您不知道怎么设置，请直接设置 qps 即可，pool size 设置为默认值 0。</p></div><h3 id="示例" tabindex="-1">示例 <a class="header-anchor" href="#示例" aria-label="Permalink to “示例”">​</a></h3><p>以智谱 AI 为例：</p><ul><li>查看官方文档：<a href="https://www.bigmodel.cn/dev/howuse/rate-limits" target="_blank" rel="noreferrer">智谱 AI 速率限制</a></li><li>假设 RPM = 60，则 <code>qps = 60 / 60 = 1</code></li><li><code>pool size = 1 * 10 = 10</code></li></ul><h2 id="翻译服务配置" tabindex="-1">翻译服务配置 <a class="header-anchor" href="#翻译服务配置" aria-label="Permalink to “翻译服务配置”">​</a></h2><p>单击「LLM API 配置管理」中的「新增」按钮，配置翻译服务。</p><p><img src="https://raw.githubusercontent.com/guaguastandup/zotero-pdf2zh/main/images/editor.png" alt="LLM API 编辑器"></p><h3 id="配置说明-1" tabindex="-1">配置说明 <a class="header-anchor" href="#配置说明-1" aria-label="Permalink to “配置说明”">​</a></h3><ul><li>您可以为同一个服务添加多种配置</li><li>每次只能激活一种配置，翻译时使用激活的配置</li><li>配置后需要在「翻译服务」处选择要使用的服务</li></ul><h3 id="字段说明" tabindex="-1">字段说明 <a class="header-anchor" href="#字段说明" aria-label="Permalink to “字段说明”">​</a></h3><table tabindex="0"><thead><tr><th>字段</th><th>说明</th></tr></thead><tbody><tr><td>服务名称</td><td>自定义配置名称</td></tr><tr><td>服务类型</td><td>选择翻译服务提供商</td></tr><tr><td>URL</td><td>API 端点地址（某些服务不需要）</td></tr><tr><td>API Key</td><td>API 密钥</td></tr><tr><td>模型</td><td>使用的模型名称</td></tr><tr><td>额外配置</td><td>其他可选参数</td></tr></tbody></table><h2 id="翻译服务介绍" tabindex="-1">翻译服务介绍 <a class="header-anchor" href="#翻译服务介绍" aria-label="Permalink to “翻译服务介绍”">​</a></h2><h3 id="免费-免配置服务" tabindex="-1">免费 &amp; 免配置服务 <a class="header-anchor" href="#免费-免配置服务" aria-label="Permalink to “免费 &amp; 免配置服务”">​</a></h3><table tabindex="0"><thead><tr><th>服务名称</th><th>服务介绍</th><th>注意事项</th></tr></thead><tbody><tr><td><strong>siliconflowfree</strong></td><td>基于硅基流动提供的 GLM4-9B 模型，由硅基流动、pdf2zh_next 和 BabelDOC 联合提供服务</td><td>1. 仅支持 pdf2zh_next引擎<br>2. 无需选择 qps，默认为 40<br>3. 可能存在漏翻译情况</td></tr><tr><td><strong>bing/google</strong></td><td>bing/google 的官方机器翻译</td><td>存在限流，翻译失败请将并发数调至 2 及以下</td></tr></tbody></table><h3 id="具有优惠-赠送的服务" tabindex="-1">具有优惠/赠送的服务 <a class="header-anchor" href="#具有优惠-赠送的服务" aria-label="Permalink to “具有优惠/赠送的服务”">​</a></h3><table tabindex="0"><thead><tr><th>服务名称</th><th>服务介绍</th><th>注意事项</th></tr></thead><tbody><tr><td><strong>openaliked</strong></td><td>火山引擎协作计划，个人用户每天最多赠送 50w token</td><td>1. 额度按前一天使用量等额计算<br>2. 支持高并发：500~1000<br>3. URL：<code>https://ark.cn-beijing.volces.com/api/v3</code></td></tr><tr><td><strong>silicon</strong></td><td>通过邀请好友获得 14 元赠送金额</td><td>1. URL：<code>https://api.siliconflow.cn/v1</code><br>2. 免费版线程数较低，建议设置为 6 左右</td></tr><tr><td><strong>zhipu</strong></td><td>智谱部分模型可支持免费调用</td><td>免费服务并发数不要设置过高，建议 6 以内</td></tr></tbody></table><h3 id="高质量服务" tabindex="-1">高质量服务 <a class="header-anchor" href="#高质量服务" aria-label="Permalink to “高质量服务”">​</a></h3><table tabindex="0"><thead><tr><th>服务名称</th><th>服务介绍</th><th>推荐设置</th></tr></thead><tbody><tr><td><strong>aliyunDashScope</strong></td><td>翻译效果较好，新用户有赠送额度</td><td>选择 LLM API 配置中的默认模型选项</td></tr><tr><td><strong>deepseek</strong></td><td>翻译效果好，有缓存命中机制（推荐）</td><td>使用 deepseek v3 服务</td></tr></tbody></table><h3 id="openai-兼容服务" tabindex="-1">OpenAI 兼容服务 <a class="header-anchor" href="#openai-兼容服务" aria-label="Permalink to “OpenAI 兼容服务”">​</a></h3><p><strong>openailiked</strong> 服务选项可以填写所有兼容 OpenAI 格式的 LLM 服务。</p><p>您需要填写：</p><ul><li><strong>URL</strong>：LLM 服务供应商提供的 API 地址</li><li><strong>API Key</strong>：您的 API 密钥</li><li><strong>Model</strong>：模型名称</li></ul><div class="tip custom-block"><p class="custom-block-title">示例</p><p>火山引擎 URL 填写为：<code>https://ark.cn-beijing.volces.com/api/v3</code></p></div><h2 id="pdf2zh-引擎配置" tabindex="-1">pdf2zh 引擎配置 <a class="header-anchor" href="#pdf2zh-引擎配置" aria-label="Permalink to “pdf2zh 引擎配置”">​</a></h2><h3 id="自定义字体" tabindex="-1">自定义字体 <a class="header-anchor" href="#自定义字体" aria-label="Permalink to “自定义字体”">​</a></h3><p>字体文件路径为本地路径。</p><div class="warning custom-block"><p class="custom-block-title">远程部署限制</p><p>如果采用远端服务器部署，暂时无法使用本配置，需要手动修改 <code>config.json</code> 文件中的 <code>NOTO_FONT_PATH</code> 字段。</p></div><h2 id="pdf2zh-next-引擎配置" tabindex="-1">pdf2zh_next 引擎配置 <a class="header-anchor" href="#pdf2zh-next-引擎配置" aria-label="Permalink to “pdf2zh_next 引擎配置”">​</a></h2><h3 id="双语-dual-文件显示模式" tabindex="-1">双语(Dual)文件显示模式 <a class="header-anchor" href="#双语-dual-文件显示模式" aria-label="Permalink to “双语(Dual)文件显示模式”">​</a></h3><ul><li><strong>Left&amp;Right</strong>：左右对照模式</li><li><strong>Up&amp;Down</strong>：上下对照模式</li></ul><h3 id="提取术语表" tabindex="-1">提取术语表 <a class="header-anchor" href="#提取术语表" aria-label="Permalink to “提取术语表”">​</a></h3><p>开启后会提取文档中的术语表，但会消耗更多 Token。</p><h3 id="ocr-临时方案" tabindex="-1">OCR 临时方案 <a class="header-anchor" href="#ocr-临时方案" aria-label="Permalink to “OCR 临时方案”">​</a></h3><ul><li>pdf2zh 和 pdf2zh_next 不直接提供文档 OCR 功能</li><li>您需要用其他工具对扫描版文件进行 OCR 处理</li><li>此选项只是一个对于 OCR 后文件的兼容方案</li></ul><div class="tip custom-block"><p class="custom-block-title">兼容模式</p><p>兼容模式生成的文件大小会更大，非必要情况不需要开启。</p></div><h2 id="额外配置参数" tabindex="-1">额外配置参数 <a class="header-anchor" href="#额外配置参数" aria-label="Permalink to “额外配置参数”">​</a></h2><p>额外配置参数名需要与配置文件中的字段相同。</p><p>例如在 pdf2zh_next 中，openai 对应的额外配置：</p><ul><li><code>openai_temperature</code></li><li><code>openai_send_temperature</code></li></ul><p>这些与 <code>config.toml</code> 文件中的字段相对应。</p><div class="info custom-block"><p class="custom-block-title">详细文档</p><p>更多关于额外配置的信息，请参考 <a href="/zh/guide/extra-params.html">额外参数说明</a>。</p></div><h2 id="命令行参数" tabindex="-1">命令行参数 <a class="header-anchor" href="#命令行参数" aria-label="Permalink to “命令行参数”">​</a></h2><p>启动 <code>server.py</code> 时可用的参数：</p><table tabindex="0"><thead><tr><th>参数</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>--enable_venv</code></td><td><code>True</code></td><td>开启虚拟环境管理</td></tr><tr><td><code>--env_tool</code></td><td><code>uv</code></td><td>虚拟环境管理工具（uv/conda）</td></tr><tr><td><code>--port</code></td><td><code>8890</code></td><td>服务端口号</td></tr><tr><td><code>--check_update</code></td><td><code>True</code></td><td>自动检查更新</td></tr><tr><td><code>--update_source</code></td><td><code>gitee</code></td><td>更新源（github/gitee）</td></tr><tr><td><code>--enable_mirror</code></td><td><code>True</code></td><td>启用国内镜像</td></tr><tr><td><code>--mirror_source</code></td><td>中科大镜像</td><td>镜像源地址</td></tr><tr><td><code>--enable_winexe</code></td><td><code>False</code></td><td>Windows exe 安装模式</td></tr><tr><td><code>--winexe_path</code></td><td>-</td><td>Windows exe 可执行文件路径</td></tr></tbody></table><h3 id="使用示例" tabindex="-1">使用示例 <a class="header-anchor" href="#使用示例" aria-label="Permalink to “使用示例”">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 切换端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port=9999</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 关闭虚拟环境管理</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --enable_venv=False</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用 conda 虚拟环境</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --env_tool=conda</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 自定义镜像源</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mirror_source=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple/&quot;</span></span></code></pre></div><h2 id="下一步" tabindex="-1">下一步 <a class="header-anchor" href="#下一步" aria-label="Permalink to “下一步”">​</a></h2><ul><li>阅读 <a href="/zh/guide/translation-options.html">翻译选项</a> 了解各种翻译功能</li><li>阅读 <a href="/zh/guide/package-update.html">包更新</a> 了解如何更新依赖包</li><li>遇到问题请查看 <a href="/zh/guide/faq/">常见问题</a></li></ul>`,67)])])}const k=a(s,[["render",r]]);export{b as __pageData,k as default};
