import{_ as a,o as l,c as e,ak as s}from"./chunks/framework.D3UbUFr7.js";const k=JSON.parse('{"title":"网络问题","description":"","frontmatter":{},"headers":[],"relativePath":"zh/guide/faq/network.md","filePath":"zh/guide/faq/network.md"}'),r={name:"zh/guide/faq/network.md"};function t(n,i,h,o,p,d){return l(),e("div",null,[...i[0]||(i[0]=[s(`<h1 id="网络问题" tabindex="-1">网络问题 <a class="header-anchor" href="#网络问题" aria-label="Permalink to “网络问题”">​</a></h1><p>关于网络连接、端口占用、下载卡顿等问题。</p><hr><h2 id="networkerror-when-attempting-to-fetch-resource-🔥" tabindex="-1">NetworkError when attempting to fetch resource 🔥 <a class="header-anchor" href="#networkerror-when-attempting-to-fetch-resource-🔥" aria-label="Permalink to “NetworkError when attempting to fetch resource 🔥”">​</a></h2><h3 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to “问题描述”">​</a></h3><p>翻译时提示 &quot;NetworkError when attempting to fetch resource&quot; 或类似网络错误。</p><h3 id="原因" tabindex="-1">原因 <a class="header-anchor" href="#原因" aria-label="Permalink to “原因”">​</a></h3><ol><li>插件版本过旧</li><li>server.py 脚本未运行</li><li>端口被占用或防火墙阻止</li><li>杀毒软件拦截</li></ol><h3 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-label="Permalink to “解决方案”">​</a></h3><p>请按以下顺序逐步排查：</p><ol><li><p><strong>确保插件是最新版</strong></p><ul><li>版本号应该是 3.0.x，而不是旧版本 2.4.3</li><li>在 Zotero 中检查更新或重新下载最新 xpi 文件</li></ul></li><li><p><strong>确保 server.py 脚本正在运行</strong></p><ul><li>翻译过程中需要保证 server.py 脚本开启</li><li>检查终端是否有输出日志</li></ul></li><li><p><strong>检查端口是否被占用</strong></p><ul><li>默认端口 8890 可能被其他程序占用</li><li>使用以下命令检查端口：<div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># macOS/Linux</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :8890</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ano</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findstr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :8890</span></span></code></pre></div></li></ul></li><li><p><strong>切换端口重试</strong></p><ul><li>可以多次尝试更换新的端口（如 9999、8888 等）</li><li>切换端口需要修改两个地方： <ul><li>Zotero 插件配置里的 &quot;Python Server IP&quot; 中的 <code>:8890</code> 修改为 <code>:9999</code></li><li>执行脚本时的指令修改为：<code>python server.py --port=9999</code></li></ul></li></ul></li><li><p><strong>检查防火墙</strong></p><ul><li>确保防火墙允许 Python 访问网络</li><li>Windows：允许 Python 通过 Windows 防火墙</li><li>macOS：系统偏好设置 → 安全性与隐私 → 防火墙选项</li></ul></li><li><p><strong>关闭杀毒软件并重启电脑</strong></p><ul><li>某些杀毒软件会拦截 Python 的网络请求</li><li>临时关闭杀毒软件测试</li></ul></li><li><p><strong>检查终端日志</strong></p><ul><li>如果执行翻译时终端有日志输出/正在尝试翻译，此后报网络错误</li><li>应该优先解决终端中提示的具体报错，而不是网络问题</li></ul></li></ol><hr><h2 id="翻译卡在某个地方不动-🔥" tabindex="-1">翻译卡在某个地方不动 🔥 <a class="header-anchor" href="#翻译卡在某个地方不动-🔥" aria-label="Permalink to “翻译卡在某个地方不动 🔥”">​</a></h2><h3 id="问题描述-1" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述-1" aria-label="Permalink to “问题描述”">​</a></h3><p>翻译进度条卡在某个位置（如 10/100）不动，或者长时间没有响应。</p><h3 id="原因-1" tabindex="-1">原因 <a class="header-anchor" href="#原因-1" aria-label="Permalink to “原因”">​</a></h3><p>pdf2zh_next 在首次启动时，需要远程下载字体和模型文件，这个过程比较慢。下载的文件包括：</p><ul><li>BabelDOC 资源文件</li><li>字体文件</li><li>OCR 模型（如果使用）</li></ul><h3 id="解决方案-1" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-1" aria-label="Permalink to “解决方案”">​</a></h3><ol><li><p><strong>用预热模式，继续等待下载</strong></p><ul><li>首次下载可能需要 10-30 分钟，取决于网络速度</li><li>请保持耐心等待，不要关闭终端</li></ul></li><li><p><strong>手动下载资源文件</strong></p><ul><li>访问 <a href="https://github.com/PDFMathTranslate/PDFMathTranslate-next/releases" target="_blank" rel="noreferrer">pdf2zh_next 最新 release</a></li><li>下载其中的 exe 包，例如：<code>pdf2zh-v2.6.4-BabelDOC-xxx-with-assets-win64.zip</code></li><li>如果由于网络问题无法下载，请加入 QQ 群下载群文件</li><li>解压后打开其中的 pdf2zh.exe</li><li>浏览器会自动打开 GUI 页面（<code>http://127.0.0.1:7860/</code>）</li><li>在 GUI 中翻译一篇文章后退出</li><li>回到 Zotero 插件重新翻译</li></ul></li><li><p><strong>检查网络连接</strong></p><ul><li>确保网络连接正常</li><li>如果在国内，可能需要使用镜像源</li></ul></li></ol><hr><h2 id="预热步骤卡住" tabindex="-1">预热步骤卡住 <a class="header-anchor" href="#预热步骤卡住" aria-label="Permalink to “预热步骤卡住”">​</a></h2><h3 id="问题描述-2" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述-2" aria-label="Permalink to “问题描述”">​</a></h3><p>使用 <code>--warmup</code> 参数时，卡在 warmup 步骤不动。</p><h3 id="原因-2" tabindex="-1">原因 <a class="header-anchor" href="#原因-2" aria-label="Permalink to “原因”">​</a></h3><p>与&quot;翻译卡在某个地方不动&quot;相同，是因为需要下载 babeldoc 的资源文件。</p><h3 id="解决方案-2" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-2" aria-label="Permalink to “解决方案”">​</a></h3><p>见上方&quot;翻译卡在某个地方不动&quot;的解决方案。</p><hr><h2 id="第一次翻译时进度条一直卡在某一处" tabindex="-1">第一次翻译时进度条一直卡在某一处 <a class="header-anchor" href="#第一次翻译时进度条一直卡在某一处" aria-label="Permalink to “第一次翻译时进度条一直卡在某一处”">​</a></h2><h3 id="问题描述-3" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述-3" aria-label="Permalink to “问题描述”">​</a></h3><p>没使用预热方法，在 pdf2zh_next 的第一次翻译时，进度条一直卡在某一处（如 10/100），或出现 &quot;assets download failed&quot; 的问题。</p><h3 id="原因-3" tabindex="-1">原因 <a class="header-anchor" href="#原因-3" aria-label="Permalink to “原因”">​</a></h3><p>pdf2zh_next 首次翻译需要下载字体和模型文件。</p><h3 id="解决方案-3" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-3" aria-label="Permalink to “解决方案”">​</a></h3><p>见上方&quot;翻译卡在某个地方不动&quot;的解决方案。</p><hr><h2 id="server-zip-下载失败" tabindex="-1">server.zip 下载失败 <a class="header-anchor" href="#server-zip-下载失败" aria-label="Permalink to “server.zip 下载失败”">​</a></h2><h3 id="问题描述-4" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述-4" aria-label="Permalink to “问题描述”">​</a></h3><p>使用 wget 下载 server.zip 时下载失败。</p><h3 id="原因-4" tabindex="-1">原因 <a class="header-anchor" href="#原因-4" aria-label="Permalink to “原因”">​</a></h3><p>网络连接问题或 GitHub 访问受限。</p><h3 id="解决方案-4" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-4" aria-label="Permalink to “解决方案”">​</a></h3><ol><li><p><strong>手动下载</strong></p><ul><li>直接访问 <a href="https://github.com/guaguastandup/zotero-pdf2zh/blob/main/server.zip" target="_blank" rel="noreferrer">server.zip</a></li><li>点击页面右上角的 &quot;Download&quot; 按钮</li><li>将下载的文件移动到 zotero-pdf2zh 文件夹</li><li>手动解压：<div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># macOS/Linux</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server.zip</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Windows</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 右键解压或使用以下命令</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -xf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server.zip</span></span></code></pre></div></li></ul></li><li><p><strong>使用镜像源</strong></p><ul><li>尝试使用 gitee 镜像源（如果可用）</li></ul></li><li><p><strong>使用代理</strong></p><ul><li>如果网络受限，可以配置代理后重试</li></ul></li></ol><hr><h2 id="bing-google-翻译报错或中止-🔥" tabindex="-1">bing/google 翻译报错或中止 🔥 <a class="header-anchor" href="#bing-google-翻译报错或中止-🔥" aria-label="Permalink to “bing/google 翻译报错或中止 🔥”">​</a></h2><h3 id="问题描述-5" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述-5" aria-label="Permalink to “问题描述”">​</a></h3><p>使用 bing/google 免费翻译服务时，翻译到一半就报错/卡住/中止。</p><h3 id="原因-5" tabindex="-1">原因 <a class="header-anchor" href="#原因-5" aria-label="Permalink to “原因”">​</a></h3><p>bing 和 google 的翻译服务都存在<strong>限流</strong>，当请求频率过高时会拒绝服务。</p><h3 id="解决方案-5" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案-5" aria-label="Permalink to “解决方案”">​</a></h3><ol><li><p><strong>降低并发数</strong></p><ul><li>将插件设置中的并发数设置得非常低（建议 2 及以下）</li><li>将 QPS 设置为 1 或更低</li></ul></li><li><p><strong>更换翻译服务</strong></p><ul><li>bing/google 的限流较为严重，不适合长期使用</li><li>建议使用更加稳定的服务： <ul><li><a href="/zh/guide/configuration.html#siliconflowfree">siliconflowfree</a> - 免费但可能漏翻译</li><li><a href="/zh/guide/configuration.html#deepseek">deepseek</a> - 翻译效果好，有缓存机制</li><li>其他付费服务</li></ul></li></ul></li></ol><div class="tip custom-block"><p class="custom-block-title">建议</p><p>为了获得更好的翻译体验和稳定性，建议配置自己的 API Key 使用付费服务或硅基流动免费服务。</p></div>`,53)])])}const g=a(r,[["render",t]]);export{k as __pageData,g as default};
